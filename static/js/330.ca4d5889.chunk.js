(()=>{let e,t=1/0,r=0,a=[];let n=new Float64Array,f=[];const o=()=>{if(!l){l=!0;let s=a;(a=>{if(!e)return;const o=Math.min(r,t),l=new Float32Array(e),s=new Uint8Array(e),u=new Float32Array(4*o),w=new Float32Array(3*o),i=new Float32Array(3*o),y=new Float32Array(4*o);if(n.length!==o){n=new Float64Array(o);const e=new Uint32Array(n.buffer);for(let t=0;t<o;t++)e[2*t]=t}else{let e=f[2]*a[2]+f[6]*a[6]+f[10]*a[10];if(Math.abs(e-1)<.01)return}const A=new Float32Array(n.buffer),b=new Uint32Array(n.buffer);for(let e=0;e<o;e++){let t=b[2*e];A[2*e+1]=1e4-(a[2]*l[8*t+0]+a[6]*l[8*t+1]+a[10]*l[8*t+2])}f=a,n.sort();for(let e=0;e<o;e++){const t=b[2*e];u[4*e+0]=(s[32*t+28+0]-128)/128,u[4*e+1]=(s[32*t+28+1]-128)/128,u[4*e+2]=(s[32*t+28+2]-128)/128,u[4*e+3]=(s[32*t+28+3]-128)/128,i[3*e+0]=l[8*t+0],i[3*e+1]=l[8*t+1],i[3*e+2]=l[8*t+2],y[4*e+0]=s[32*t+24+0]/255,y[4*e+1]=s[32*t+24+1]/255,y[4*e+2]=s[32*t+24+2]/255,y[4*e+3]=s[32*t+24+3]/255,w[3*e+0]=l[8*t+3+0],w[3*e+1]=l[8*t+3+1],w[3*e+2]=l[8*t+3+2]}self.postMessage({quat:u,center:i,color:y,scale:w,viewProj:a},[u.buffer,i.buffer,y.buffer,w.buffer])})(s),setTimeout((()=>{l=!1,s!==a&&o()}),0)}};let l;self.onmessage=n=>{n.data.buffer?(e=n.data.buffer,r=n.data.vertexCount):n.data.vertexCount?r=n.data.vertexCount:n.data.view&&(a=n.data.view,t=n.data.maxSplats,o())}})();
//# sourceMappingURL=330.ca4d5889.chunk.js.map